"use strict";!function(){function n(t){var c=this;this.dragObj=t,this.startDrag=function(t){t.stopPropagation();var i=$pm.zoomRate?$pm.zoomRate:1,r="touchmove"==t.type?t.touches[0].clientY:t.clientY,d="touchmove"==t.type?t.touches[0].clientX:t.clientX,a=this.dragObj.offsetTop,h=this.dragObj.offsetLeft;function e(t){var e="touchmove"==t.type?t.touches[0].clientY:t.clientY,s="touchmove"==t.type?t.touches[0].clientX:t.clientX,n=(e-r)/i+a,o=(s-d)/i+h;c.dragObj.style.top=n+"px",c.dragObj.style.left=o+"px"}function s(){document.removeEventListener("mousemove",e),document.removeEventListener("touchmove",e),document.removeEventListener("mouseup",s),document.removeEventListener("touchend",s)}this.dragObj.style.transition="none",document.addEventListener("mousemove",e),document.addEventListener("touchmove",e),document.addEventListener("mouseup",s),document.addEventListener("touchend",s)},this.dragObj.addEventListener("mousedown",this.startDrag.bind(this)),this.dragObj.addEventListener("touchstart",this.startDrag.bind(this))}new function(t){var s=this;this.dragObj=t,this.keyPressed={},this.start=function(){function t(t){s.keyPressed[t.keyCode]=!0,s.targetMove()}for(var e in this.dragObj)this.dragObj[e].style.position="absolute",new n(this.dragObj[e]),this.dragObj[e].addEventListener("click",function(){s.target=s.dragObj[e],document.removeEventListener("keydown",t),document.addEventListener("keydown",t),document.addEventListener("keyup",function(t){s.keyPressed[t.keyCode]=!1})})},this.targetMove=function(){var t=1;this.keyPressed[16]?t=10:this.keyPressed[17]&&(t=100),this.keyPressed[39]?this.target.style.left=parseInt(this.target.style.left)+t+"px":this.keyPressed[37]?this.target.style.left=parseInt(this.target.style.left)-t+"px":this.keyPressed[40]?this.target.style.top=this.target.offsetTop+t+"px":this.keyPressed[38]&&(this.target.style.top=this.target.offsetTop-t+"px")},this.start()}($ts.getEl("[drag]"))}();